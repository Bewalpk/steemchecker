/**
 * Steemit Widgets
 *
 * @author mkt <kontakt@markus-kottlaender.de>
 * @license MIT
 */
var steemitWidgets={};steemitWidgets.updateIntervals=[],steemitWidgets.profile=function(e){function t(){steem.api.getAccounts([i.user],function(e,t){if(!e&&t.length){var n=(t=t[0]).json_metadata?JSON.parse(t.json_metadata).profile:{};steem.api.getFollowCount(i.user,function(e,r){var l=steemitWidgets.getTemplate(i.template).replace(/\${USER}/gi,t.name).replace(/\${NAME}/gi,n.name).replace(/\${LOCATION}/gi,n.location).replace(/\${WEBSITE}/gi,n.website).replace(/\${IMAGE}/gi,n.profile_image?"https://steemitimages.com/2048x512/"+n.profile_image:"").replace(/\${COVERIMAGE}/gi,n.cover_image?"https://steemitimages.com/2048x512/"+n.cover_image:"").replace(/\${REPUTATION}/gi,steemitWidgets.calculateReputation(t.reputation,i.reputationPrecision)).replace(/\${VOTINGPOWER}/gi,steemitWidgets.calculateVotingPower(t.voting_power,t.last_vote_time,i.votingPowerPrecision)).replace(/\${FOLLOWERS}/gi,r.follower_count).replace(/\${FOLLOWING}/gi,r.following_count).replace(/\${POSTCOUNT}/gi,t.post_count).replace(/\${CREATED}/gi,i.createdCallback(t.created)).replace(/\${ABOUT}/gi,n.about);a.innerHTML=l})}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,user:"mkt",template:'<img width="100" src="${IMAGE}" /><br><a href="https://steemit.com/@${USER}">@${USER}</a>',reputationPrecision:0,votingPowerPrecision:2,updateInterval:60,createdCallback:function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return e=new Date(e),t[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.blog=function(e){function t(){steem.api.getDiscussionsByBlog({tag:i.user,limit:i.limit},function(e,t){if(!e&&t.length){for(var n="",r=0;r<t.length;r++){var l=JSON.parse(t[r].json_metadata);n+=steemitWidgets.getTemplate(i.template).replace(/\${URL}/gi,"https://steemit.com"+t[r].url).replace(/\${TITLE}/gi,t[r].title).replace(/\${AUTHOR}/gi,t[r].author).replace(/\${REPUTATION}/gi,steemitWidgets.calculateReputation(t[r].author_reputation,i.reputationPrecision)).replace(/\${RESTEEMED}/gi,t[r].author!=i.user?i.resteemedIndicator:"").replace(/\${RESTEEMEDBY}/gi,t[r].first_reblogged_by?"resteemed by "+t[r].first_reblogged_by:"").replace(/\${DATE}/gi,i.dateCallback(new Date(t[r].created))).replace(/\${IMAGE}/gi,l.image?"https://steemitimages.com/2048x512/"+l.image[0]:i.defaultImage).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(t[r]).toFixed(i.payoutPrecision)).replace(/\${COMMENTS}/gi,t[r].children).replace(/\${UPVOTES}/gi,t[r].net_votes).replace(/\${CATEGORY}/gi,t[r].category)}a.innerHTML=n}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,user:"mkt",limit:10,template:'<div><a href="${URL}">${TITLE}</a>${RESTEEMED}<br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments</div>',defaultImage:"https://steemitimages.com/DQmXYX9hqSNcikTK8ARb61BPnTk4CKMhaiqr22iCKD8CKsp/steemit-logo.png",resteemedIndicator:" (resteemed) ",payoutPrecision:2,reputationPrecision:0,updateInterval:60,dateCallback:function(e){return e}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.feed=function(e){function t(){steem.api.getDiscussionsByFeed({tag:i.user,limit:i.limit},function(e,t){if(!e&&t.length){for(var n="",r=0;r<t.length;r++){var l=JSON.parse(t[r].json_metadata);n+=steemitWidgets.getTemplate(i.template).replace(/\${URL}/gi,"https://steemit.com"+t[r].url).replace(/\${TITLE}/gi,t[r].title).replace(/\${AUTHOR}/gi,t[r].author).replace(/\${REPUTATION}/gi,steemitWidgets.calculateReputation(t[r].author_reputation,i.reputationPrecision)).replace(/\${RESTEEMED}/gi,t[r].first_reblogged_by?i.resteemedIndicator:"").replace(/\${RESTEEMEDBY}/gi,t[r].first_reblogged_by?"resteemed by "+t[r].first_reblogged_by:"").replace(/\${DATE}/gi,i.dateCallback(new Date(t[r].created))).replace(/\${IMAGE}/gi,l.image?"https://steemitimages.com/2048x512/"+l.image[0]:i.defaultImage).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(t[r]).toFixed(i.payoutPrecision)).replace(/\${COMMENTS}/gi,t[r].children).replace(/\${UPVOTES}/gi,t[r].net_votes).replace(/\${CATEGORY}/gi,t[r].category)}a.innerHTML=n}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,user:"mkt",limit:10,template:'<div><a href="${URL}">${TITLE}</a>${RESTEEMED}<br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments</div>',defaultImage:"https://steemitimages.com/DQmXYX9hqSNcikTK8ARb61BPnTk4CKMhaiqr22iCKD8CKsp/steemit-logo.png",resteemedIndicator:" (resteemed) ",payoutPrecision:2,reputationPrecision:0,updateInterval:60,dateCallback:function(e){return e}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.new=function(e){function t(){steem.api.getDiscussionsByCreated({tag:i.tag,limit:i.limit},function(e,t){if(!e&&t.length){for(var n="",r=0;r<t.length;r++){var l=JSON.parse(t[r].json_metadata);n+=steemitWidgets.getTemplate(i.template).replace(/\${URL}/gi,"https://steemit.com"+t[r].url).replace(/\${TITLE}/gi,t[r].title).replace(/\${AUTHOR}/gi,t[r].author).replace(/\${REPUTATION}/gi,steemitWidgets.calculateReputation(t[r].author_reputation,i.reputationPrecision)).replace(/\${DATE}/gi,i.dateCallback(new Date(t[r].created))).replace(/\${IMAGE}/gi,l.image?"https://steemitimages.com/2048x512/"+l.image[0]:i.defaultImage).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(t[r]).toFixed(i.payoutPrecision)).replace(/\${COMMENTS}/gi,t[r].children).replace(/\${UPVOTES}/gi,t[r].net_votes).replace(/\${CATEGORY}/gi,t[r].category)}a.innerHTML=n}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,tag:null,limit:10,template:'<div><a href="${URL}">${TITLE}</a><br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments</div>',defaultImage:"https://steemitimages.com/DQmXYX9hqSNcikTK8ARb61BPnTk4CKMhaiqr22iCKD8CKsp/steemit-logo.png",payoutPrecision:2,reputationPrecision:0,updateInterval:60,dateCallback:function(e){return e}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.hot=function(e){function t(){steem.api.getDiscussionsByHot({tag:i.tag,limit:i.limit},function(e,t){if(!e&&t.length){for(var n="",r=0;r<t.length;r++){var l=JSON.parse(t[r].json_metadata);n+=steemitWidgets.getTemplate(i.template).replace(/\${URL}/gi,"https://steemit.com"+t[r].url).replace(/\${TITLE}/gi,t[r].title).replace(/\${AUTHOR}/gi,t[r].author).replace(/\${REPUTATION}/gi,steemitWidgets.calculateReputation(t[r].author_reputation,i.reputationPrecision)).replace(/\${DATE}/gi,i.dateCallback(new Date(t[r].created))).replace(/\${IMAGE}/gi,l.image?"https://steemitimages.com/2048x512/"+l.image[0]:i.defaultImage).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(t[r]).toFixed(i.payoutPrecision)).replace(/\${COMMENTS}/gi,t[r].children).replace(/\${UPVOTES}/gi,t[r].net_votes).replace(/\${CATEGORY}/gi,t[r].category)}a.innerHTML=n}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,tag:null,limit:10,template:'<div><a href="${URL}">${TITLE}</a><br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments</div>',defaultImage:"https://steemitimages.com/DQmXYX9hqSNcikTK8ARb61BPnTk4CKMhaiqr22iCKD8CKsp/steemit-logo.png",payoutPrecision:2,reputationPrecision:0,updateInterval:60,dateCallback:function(e){return e}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.trending=function(e){function t(){steem.api.getDiscussionsByTrending({tag:i.tag,limit:i.limit},function(e,t){if(!e&&t.length){for(var n="",r=0;r<t.length;r++){var l=JSON.parse(t[r].json_metadata);n+=steemitWidgets.getTemplate(i.template).replace(/\${URL}/gi,"https://steemit.com"+t[r].url).replace(/\${TITLE}/gi,t[r].title).replace(/\${AUTHOR}/gi,t[r].author).replace(/\${REPUTATION}/gi,steemitWidgets.calculateReputation(t[r].author_reputation,i.reputationPrecision)).replace(/\${DATE}/gi,i.dateCallback(new Date(t[r].created))).replace(/\${IMAGE}/gi,l.image?"https://steemitimages.com/2048x512/"+l.image[0]:i.defaultImage).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(t[r]).toFixed(i.payoutPrecision)).replace(/\${COMMENTS}/gi,t[r].children).replace(/\${UPVOTES}/gi,t[r].net_votes).replace(/\${CATEGORY}/gi,t[r].category)}a.innerHTML=n}else a.innerHTML="Error: API not responding!"})}var i=Object.assign({element:null,tag:null,limit:10,template:'<div><a href="${URL}">${TITLE}</a><br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments</div>',defaultImage:"https://steemitimages.com/DQmXYX9hqSNcikTK8ARb61BPnTk4CKMhaiqr22iCKD8CKsp/steemit-logo.png",payoutPrecision:2,reputationPrecision:0,updateInterval:60,dateCallback:function(e){return e}},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.fullPost=function(e){var t=Object.assign({element:null,author:"mkt",permlink:"steemline-beta-multifeed-ui-and-notifications-for-steemit",template:'<div><a href="${URL}">${TITLE}</a><br>${Payout}, ${UPVOTES} Upvotes, ${COMMENTS} Comments<p>${BODY}</p></div>',payoutPrecision:2,reputationPrecision:0,dateCallback:function(e){return e},bodyCallback:function(e){return e},tagsCallback:function(e){var t,i="";for(t=0;t<e.length;t++)i+='<a href="https://steemit.com/trending/'+e[t]+'">'+e[t]+"</a>";return'<div class="steemit-full-post-tags">'+i+"</div>"}},e),i=t.element instanceof Element?t.element:document.getElementById(t.element);i?steem.api.getContent(t.author,t.permlink,function(e,a){if(!e&&a){var n=JSON.parse(a.json_metadata),r=steemitWidgets.getTemplate(t.template).replace(/\${URL}/gi,"https://steemit.com"+a.url).replace(/\${TITLE}/gi,a.title).replace(/\${AUTHOR}/gi,a.author).replace(/\${REPUTATION}/gi,steemitWidgets.calculateReputation(a.author_reputation,t.reputationPrecision)).replace(/\${DATE}/gi,t.dateCallback(new Date(a.created))).replace(/\${BODY}/gi,t.bodyCallback(a.body)).replace(/\${PAYOUT}/gi,steemitWidgets.getPayout(a).toFixed(t.payoutPrecision)).replace(/\${COMMENTS}/gi,a.children).replace(/\${UPVOTES}/gi,a.net_votes).replace(/\${CATEGORY}/gi,a.category).replace(/\${TAGS}/gi,t.tagsCallback(n.tags));i.innerHTML=r}else i.innerHTML="Error: API not responding!"}):console.log("Element "+t.element+" not found!")},steemitWidgets.ticker=function(e){function t(){var e=new XMLHttpRequest;e.open("GET","https://api.coinmarketcap.com/v1/ticker/"+i.currency+"/",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200==e.status){var t=JSON.parse(e.responseText)[0],n="";n+=steemitWidgets.getTemplate(i.template).replace(/\${ID}/g,t.id).replace(/\${NAME}/g,t.name).replace(/\${RANK}/g,t.rank).replace(/\${SYMBOL}/g,t.symbol).replace(/\${IMAGE}/g,"https://files.coinmarketcap.com/static/img/coins/64x64/"+t.id+".png").replace(/\${24H_VOLUME_USD}/g,parseFloat(t["24h_volume_usd"]).toLocaleString(void 0,{minimumFractionDigits:2})).replace(/\${AVAILABLE_SUPPLY}/g,parseFloat(t.available_supply).toLocaleString(void 0,{minimumFractionDigits:2})).replace(/\${TOTAL_SUPPLY}/g,parseFloat(t.total_supply).toLocaleString(void 0,{minimumFractionDigits:2})).replace(/\${MARKET_CAP_USD}/g,parseFloat(t.market_cap_usd).toLocaleString()).replace(/\${PERCENT_CHANGE_1H}/g,steemitWidgets.getColoredPercentChange(t.percent_change_1h)).replace(/\${PERCENT_CHANGE_7D}/g,steemitWidgets.getColoredPercentChange(t.percent_change_7d)).replace(/\${PERCENT_CHANGE_24H}/g,steemitWidgets.getColoredPercentChange(t.percent_change_24h)).replace(/\${PRICE_BTC}/g,parseFloat(t.price_btc).toFixed(i.priceBTCPrecision)).replace(/\${PRICE_USD}/g,parseFloat(t.price_usd).toFixed(i.priceUSDPrecision)),a.innerHTML=n}else a.innerHTML="Error: API not responding!"}}var i=Object.assign({element:null,currency:"steem",template:"<h3>${NAME} <small>(${SYMBOL})</small></h3><p>USD: ${PRICE_USD}<br>BTC: ${PRICE_BTC}</p>",priceBTCPrecision:8,priceUSDPrecision:2,updateInterval:300},e),a=i.element instanceof Element?i.element:document.getElementById(i.element);a?(t(),i.updateInterval&&steemitWidgets.updateIntervals.push(setInterval(t,1e3*i.updateInterval))):console.log("Element "+i.element+" not found!")},steemitWidgets.getTemplate=function(e){var t=document.getElementById(e);return t?t.innerHTML:e},steemitWidgets.getPayout=function(e){if("1970-01-01T00:00:00"==e.last_payout){var t=e.pending_payout_value.replace(" SBD","");return parseFloat(t)}var i=e.total_payout_value.replace(" SBD",""),a=e.curator_payout_value.replace(" SBD","");return parseFloat(i)+parseFloat(a)},steemitWidgets.getColoredPercentChange=function(e){return e>0&&(e="+"+e),e>0?'<span style="color: #090;">'+e+" %</span>":e<0?'<span style="color: #900;">'+e+" %</span>":e+" %"},steemitWidgets.calculateReputation=function(e,t){var i=9*(Math.log10(Math.abs(e))-9)+25,t=parseInt(t);return(e<0?"-":"")+(t?i.toFixed(t):Math.floor(i))},steemitWidgets.calculateVotingPower=function(e,t,i){return e+=1e4*((new Date-new Date(t+"Z"))/1e3)/432e3,Math.min(e/100,100).toFixed(i)},window.jQuery&&(jQuery.fn.steemitProfile=function(e){steemitWidgets.profile(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitBlog=function(e){steemitWidgets.blog(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitFeed=function(e){steemitWidgets.feed(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitNew=function(e){steemitWidgets.new(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitHot=function(e){steemitWidgets.hot(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitTrending=function(e){steemitWidgets.trending(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitFullPost=function(e){steemitWidgets.fullPost(jQuery.extend({element:this[0]},e))},jQuery.fn.steemitTicker=function(e){steemitWidgets.ticker(jQuery.extend({element:this[0]},e))});